services:
  bungle.framework.simple_entity_discover:
    class: Bungle\FrameworkBundle\Meta\SimpleEntityDiscover
    public: false
    arguments: [[]]

  bungle.framework.logic_name:
    class: Bungle\FrameworkBundle\Meta\LogicName
    # By default use a empty EntityDiscover, use DoctrineBungleBridgeBundle to override
    arguments: ["@bungle.framework.simple_entity_discover"]

  bungle.framework.high_prefix:
    class: Bungle\FrameworkBundle\Meta\HighPrefix
    # By default use a empty EntityDiscover, use DoctrineBungleBridgeBundle to override
    arguments: ["@bungle.framework.simple_entity_discover"]

  Bungle\FrameworkBundle\Meta\LogicName: '@bungle.framework.logic_name'
  Bungle\FrameworkBundle\Meta\HighPrefix: '@bungle.framework.high_prefix'

  bungle.framework.state_machine.transition_event_listener:
    public: false
    class: Bungle\FrameworkBundle\StateMachine\EventListener\TransitionEventListener 
    tags:
      - { name: kernel.event_listener, event: workflow.transition }
    arguments: ["@bungle.framework.high_prefix"]

  bungle.framework.state_machine.transition_role_guard_listener:
    public: false
    class: Bungle\FrameworkBundle\StateMachine\EventListener\TransitionRoleGuardListener  
    tags:
      - { name: kernel.event_listener, event: workflow.guard }
    arguments: ["@security.authorization_checker"]
